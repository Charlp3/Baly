<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Suivi de mon chien â€“ v1.9</title>

<style>
body { font-family: Arial, sans-serif; margin:0; background:#D0E4F7; color:#1C2A40; }
header { background:#2C5E99; color:#fff; text-align:center; padding:15px; }

nav { display:flex; background:#1C3B68; flex-wrap:wrap; }
nav button {
  flex:1 1 25%;
  padding:12px;
  background:#1C3B68;
  color:#fff;
  border:none;
  font-size:1rem;
}
nav button.active {
  background:#D0E4F7;
  color:#1C3B68;
  font-weight:bold;
}

section { display:none; padding:20px; }
section.active { display:block; }

label { display:block; margin-top:10px; font-weight:bold; }
input, textarea {
  width:100%;
  padding:8px;
  margin-top:4px;
  border-radius:4px;
  border:1px solid #587EA3;
  background:#F0F8FF;
  font-size:1rem;
}

/* ğŸ”  FICHE : polices agrandies */
#fiche label { font-size:1.1rem; }
#fiche input,
#fiche textarea {
  font-size:1.15rem;
  padding:10px;
}

button.action {
  margin-top:12px;
  padding:10px 15px;
  background:#2C5E99;
  color:#fff;
  border:none;
  border-radius:5px;
  font-size:1rem;
}

/* ğŸ”´ petit bouton supprimer */
button.suppr {
  background:#C0392B;
  color:#fff;
  border:none;
  border-radius:4px;
  padding:4px 8px;
  font-size:0.8rem;
  margin-top:6px;
}
button.suppr:active { background:#922B21; }

hr { margin:18px 0; }
a { color:#1C3B68; word-break:break-all; }
.ligne { margin-bottom:10px; }
</style>
</head>

<body>

<header>
Suivi de mon chien ğŸ¾<br>
<small>Â© Pierre Charlier 2025 â€” Version 1.9</small>
</header>

<nav>
<button onclick="showTab('fiche')" class="active">Fiche</button>
<button onclick="showTab('sante')">SantÃ©</button>
<button onclick="showTab('pdf')">Passeport PDF</button>
<button onclick="showTab('liens')">Liens Web</button>
</nav>

<main>

<!-- ================= FICHE ================= -->
<section id="fiche" class="active">
<label>Puce</label><input id="puce">
<label>Passeport</label><input id="passeport">
<label>Date de naissance</label>
<input type="date" id="naissance" onchange="updateAge()">
<div><strong>Ã‚ge :</strong> <span id="age">-</span></div>

<label>Poids (kg)</label><input type="number" id="poids">
<label>VÃ©tÃ©rinaire</label><input id="veto">
<label>TÃ©lÃ©phone</label><input id="tel">
<label>Clinique</label><input id="clinique">

<label>Nourriture</label><textarea id="nourriture"></textarea>
<label>Accessoires</label><textarea id="accessoires"></textarea>
<label>Autres</label><textarea id="autres"></textarea>

<button class="action" onclick="saveData()">ğŸ’¾ Sauvegarder</button>
<button class="action" onclick="exportData()">ğŸ“¤ Exporter JSON</button>

<input type="file" id="importInput" accept="application/json" hidden onchange="importData(event)">
<button class="action" onclick="importInput.click()">ğŸ“¥ Importer</button>
</section>

<!-- ================= SANTE ================= -->
<section id="sante">
<h3>Maladies</h3>
<div id="listeMaladies"></div>
<button class="action" onclick="ajouterMaladie()">+ Ajouter</button>
<hr>

<h3>Accidents</h3>
<div id="listeAccidents"></div>
<button class="action" onclick="ajouterAccident()">+ Ajouter</button>
<hr>

<h3>Traitements</h3>
<div id="listeTraitements"></div>
<button class="action" onclick="ajouterTraitement()">+ Ajouter</button>
</section>

<!-- ================= PDF ================= -->
<section id="pdf">
<h3>Passeport PDF</h3>
<input type="file" id="pdfInput" accept="application/pdf">
<button class="action" onclick="ajouterPDF()">+ Ajouter</button>
<ul id="listePDF"></ul>
</section>

<!-- ================= LIENS ================= -->
<section id="liens">
<h3>Liens Web</h3>
<input id="nomLien" placeholder="Nom">
<input id="urlLien" placeholder="URL (https://...)">
<button class="action" onclick="ajouterLien()">+ Ajouter le lien</button>
<hr>
<div id="listeLiens"></div>
</section>

</main>

<script>
const donnÃ©es = {
  fiche:{},
  maladies:[],
  accidents:[],
  traitements:[],
  pdfs:[],
  liens:[]
};

/* -------- Navigation -------- */
function showTab(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
document.getElementById(id).classList.add("active");
event.target.classList.add("active");
}

/* -------- Fiche -------- */
function updateAge(){
if(!naissance.value){ age.textContent="-"; return; }
const b=new Date(naissance.value), n=new Date();
let a=n.getFullYear()-b.getFullYear();
if(n.getMonth()<b.getMonth() || (n.getMonth()==b.getMonth() && n.getDate()<b.getDate())) a--;
age.textContent = a + " an" + (a>1?"s":"");
}

function saveData(){
donnÃ©es.fiche={
puce:puce.value,passeport:passeport.value,naissance:naissance.value,
poids:poids.value,veto:veto.value,tel:tel.value,clinique:clinique.value,
nourriture:nourriture.value,accessoires:accessoires.value,autres:autres.value
};
localStorage.setItem("chienData",JSON.stringify(donnÃ©es));
alert("âœ” DonnÃ©es sauvegardÃ©es");
}

function exportData(){
const blob=new Blob([JSON.stringify(donnÃ©es,null,2)],{type:"application/json"});
const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="chien_sauvegarde.json";
a.click();
URL.revokeObjectURL(a.href);
}

function importData(e){
const f=e.target.files[0]; if(!f) return;
const r=new FileReader();
r.onload=()=>{
try{
Object.assign(donnÃ©es, JSON.parse(r.result));
localStorage.setItem("chienData",JSON.stringify(donnÃ©es));
location.reload();
}catch{ alert("âŒ Fichier invalide"); }
};
r.readAsText(f);
}

/* -------- Liens Web -------- */
function ajouterLien(){
if(!urlLien.value) return;
donnÃ©es.liens.push({nom:nomLien.value||urlLien.value, url:urlLien.value});
nomLien.value=""; urlLien.value="";
afficherLiens();
saveData();
}

function supprimerLien(i){
donnÃ©es.liens.splice(i,1);
afficherLiens();
saveData();
}

function afficherLiens(){
listeLiens.innerHTML="";
donnÃ©es.liens.forEach((l,i)=>{
listeLiens.innerHTML+=`
<div class="ligne">
<strong>${l.nom}</strong><br>
<a href="${l.url}" target="_blank">${l.url}</a><br>
<button class="suppr" onclick="supprimerLien(${i})">Supprimer</button>
<hr>
</div>`;
});
}

/* -------- PDF -------- */
function ajouterPDF(){
const f=pdfInput.files[0]; if(!f) return;
const url=URL.createObjectURL(f);
donnÃ©es.pdfs.push({nom:f.name, url});
afficherPDFs();
saveData();
}

function supprimerPDF(i){
donnÃ©es.pdfs.splice(i,1);
afficherPDFs();
saveData();
}

function afficherPDFs(){
listePDF.innerHTML="";
donnÃ©es.pdfs.forEach((p,i)=>{
listePDF.innerHTML+=`
<li>
<a href="${p.url}" target="_blank">ğŸ“„ ${p.nom}</a>
<br>
<button class="suppr" onclick="supprimerPDF(${i})">Supprimer</button>
</li>`;
});
}

/* -------- SantÃ© -------- */
function ajouterMaladie(){
donnÃ©es.maladies.push({nom:"",date:"",remarque:""});
afficherMaladies();
saveData();
}

function supprimerMaladie(i){
donnÃ©es.maladies.splice(i,1);
afficherMaladies();
saveData();
}

function afficherMaladies(){
listeMaladies.innerHTML="";
donnÃ©es.maladies.forEach((m,i)=>{
listeMaladies.innerHTML+=`
<input placeholder="Maladie" value="${m.nom}">
<input type="date" value="${m.date}">
<textarea>${m.remarque}</textarea>
<button class="suppr" onclick="supprimerMaladie(${i})">Supprimer</button>
<hr>`;
});
}

function ajouterAccident(){
donnÃ©es.accidents.push({type:"",date:"",suite:""});
afficherAccidents();
saveData();
}

function supprimerAccident(i){
donnÃ©es.accidents.splice(i,1);
afficherAccidents();
saveData();
}

function afficherAccidents(){
listeAccidents.innerHTML="";
donnÃ©es.accidents.forEach((a,i)=>{
listeAccidents.innerHTML+=`
<input placeholder="Accident" value="${a.type}">
<input type="date" value="${a.date}">
<textarea>${a.suite}</textarea>
<button class="suppr" onclick="supprimerAccident(${i})">Supprimer</button>
<hr>`;
});
}

function ajouterTraitement(){
donnÃ©es.traitements.push({nom:"",debut:"",fin:"",posologie:""});
afficherTraitements();
saveData();
}

function supprimerTraitement(i){
donnÃ©es.traitements.splice(i,1);
afficherTraitements();
saveData();
}

function afficherTraitements(){
listeTraitements.innerHTML="";
donnÃ©es.traitements.forEach((t,i)=>{
listeTraitements.innerHTML+=`
<input placeholder="Traitement" value="${t.nom}">
<input type="date" value="${t.debut}">
<input type="date" value="${t.fin}">
<textarea>${t.posologie}</textarea>
<button class="suppr" onclick="supprimerTraitement(${i})">Supprimer</button>
<hr>`;
});
}

/* -------- Restauration -------- */
window.onload=()=>{
const s=JSON.parse(localStorage.getItem("chienData")||"{}");
if(!s.fiche) return;
Object.assign(donnÃ©es,s);
Object.entries(donnÃ©es.fiche).forEach(([k,v])=>{
const el=document.getElementById(k);
if(el) el.value=v||"";
});
updateAge();
afficherLiens();
afficherPDFs();
afficherMaladies();
afficherAccidents();
afficherTraitements();
};
</script>

</body>
</html>