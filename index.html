<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Suivi Chien ‚Äì v1.8b</title>
  <style>
    body { font-family: Arial; margin: 0; background: #D0E4F7; color: #1C2A40; }
    header { background: #2C5E99; color: #fff; text-align: center; padding: 15px; }
    nav { display: flex; background: #1C3B68; }
    nav button {
      flex: 1; padding: 12px; background: #1C3B68; color: white;
      border: none; font-size: 1rem; cursor: pointer;
    }
    nav button.active {
      background: #D0E4F7; color: #1C3B68; font-weight: bold;
    }
    section { display: none; padding: 20px; }
    section.active { display: block; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, textarea {
      width: 100%; padding: 8px; margin-top: 4px;
      border-radius: 4px; border: 1px solid #587EA3;
      background-color: #F0F8FF; font-size: 1rem;
    }
    .row { margin-bottom: 15px; }
    button.action {
      background: #2C5E99; color: #fff; border: none;
      padding: 8px 12px; margin-top: 10px; border-radius: 4px;
      cursor: pointer;
    }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
    th, td { border: 1px solid #587EA3; padding: 8px; text-align: left; }
    th { background: #2C5E99; color: white; }
    tr:nth-child(even) { background: #f2f7fc; }
  </style>
</head>
<body>
  <header>
    Suivi de mon chien üêæ
    <div style="font-size: 0.9rem;">¬© Pierre Charlier 2025 ‚Äì Version 1.8b</div>
  </header>

  <nav>
    <button onclick="showTab('fiche')" class="active">Fiche</button>
    <button onclick="showTab('medicaments')">M√©dicaments</button>
    <button onclick="showTab('vaccins')">Vaccins</button>
    <button onclick="showTab('notices')">Notices</button>
    <button onclick="showTab('pdf')">Passeport PDF</button>
  </nav>

  <main>
    <section id="fiche" class="active">
      <label>Puce</label><input id="puce">
      <label>Passeport</label><input id="passeport">
      <label>Date de naissance</label><input type="date" id="naissance" onchange="updateAge()">
      <div><strong>√Çge :</strong> <span id="age">-</span></div>
      <label>Poids (kg)</label><input id="poids" type="number" step="0.1">
      <label>V√©t√©rinaire</label><input id="veto">
      <label>T√©l√©phone</label><input id="tel">
      <label>Clinique</label><input id="clinique">
      <label>Nourriture</label><textarea id="nourriture"></textarea>
      <label>Accessoires</label><textarea id="accessoires"></textarea>
      <label>Autres</label><textarea id="autres"></textarea>
      <button class="action" onclick="saveData()">üíæ Sauvegarder</button>
    </section>
    <section id="medicaments"><h3>M√©dicaments</h3><div id="medList"></div><button class="action" onclick="addMed()">+ M√©dicament</button></section>
    <section id="vaccins"><h3>Vaccins & Antiparasitaires</h3><div id="vacList"></div><button class="action" onclick="addVac()">+ Vaccin</button></section>
    <section id="notices"><h3>Notices</h3><ul id="noticesList"></ul></section>
    <section id="pdf">
      <h3>Pages Passeport PDF</h3>
      <input type="file" id="pdfInput" accept="application/pdf">
      <button class="action" onclick="addPDF()">+ Ajouter PDF</button>
      <ul id="pdfList"></ul>
    </section>
  </main>

  <script>
    const data = { fiche:{}, meds:[], vacs:[], pdfs:[] };
    function showTab(id) {
      document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.querySelector("button[onclick="showTab('" + id + "')"]").classList.add("active");
      document.getElementById(id).classList.add("active");
    }
    function updateAge() {
      const d = naissance.value;
      if (!d) return age.textContent = "-";
      const b = new Date(d), t = new Date();
      let a = t.getFullYear() - b.getFullYear();
      if (t.getMonth() < b.getMonth() || (t.getMonth() === b.getMonth() && t.getDate() < b.getDate())) a--;
      age.textContent = a + " an" + (a > 1 ? "s" : "");
    }
    function saveData() {
      data.fiche = {
        puce: puce.value, passeport: passeport.value, naissance: naissance.value, poids: poids.value,
        veto: veto.value, tel: tel.value, clinique: clinique.value,
        nourriture: nourriture.value, accessoires: accessoires.value, autres: autres.value
      };
      localStorage.setItem("chienData", JSON.stringify(data));
      refreshNotices();
      alert("‚úî Donn√©es sauvegard√©es");
    }
    function addMed(n="",d="",l="") {
      const i = data.meds.push({nom:n,date:d,lien:l})-1;
      const e = document.createElement("div");
      e.innerHTML = `
        <input placeholder="Nom" value="${n}" onchange="data.meds[${i}].nom=this.value">
        <input type="date" value="${d}" onchange="data.meds[${i}].date=this.value">
        <input placeholder='Lien notice' value="${l}" onchange="data.meds[${i}].lien=this.value; refreshNotices()">
        <hr>`;
      medList.appendChild(e);
    }
    function addVac(n="",d="",l="") {
      const i = data.vacs.push({nom:n,date:d,lien:l})-1;
      const e = document.createElement("div");
      e.innerHTML = `
        <input placeholder="Nom" value="${n}" onchange="data.vacs[${i}].nom=this.value">
        <input type="date" value="${d}" onchange="data.vacs[${i}].date=this.value">
        <input placeholder='Lien notice' value="${l}" onchange="data.vacs[${i}].lien=this.value; refreshNotices()">
        <hr>`;
      vacList.appendChild(e);
    }
    function refreshNotices() {
      let l = [...data.meds, ...data.vacs].map(e => e.lien).filter(e => e);
      noticesList.innerHTML = l.map(x => `<li><a href="${x}" target="_blank">${x}</a></li>`).join("");
    }
    function addPDF() {
      const f = pdfInput.files[0]; if (!f) return;
      data.pdfs.push(f.name);
      const li = document.createElement("li");
      li.textContent = f.name;
      pdfList.appendChild(li);
    }
    window.onload = () => {
      const d = JSON.parse(localStorage.getItem("chienData")||"{}");
      if (!d.fiche) return;
      Object.assign(data, d);
      puce.value = d.fiche.puce||"";
      passeport.value = d.fiche.passeport||"";
      naissance.value = d.fiche.naissance||""; updateAge();
      poids.value = d.fiche.poids||""; veto.value = d.fiche.veto||"";
      tel.value = d.fiche.tel||""; clinique.value = d.fiche.clinique||"";
      nourriture.value = d.fiche.nourriture||""; accessoires.value = d.fiche.accessoires||""; autres.value = d.fiche.autres||"";
      data.meds.forEach(m => addMed(m.nom,m.date,m.lien));
      data.vacs.forEach(v => addVac(v.nom,v.date,v.lien));
      data.pdfs.forEach(n => { let li = document.createElement("li"); li.textContent = n; pdfList.appendChild(li); });
      refreshNotices();
    }
  </script>
</body>
</html>
